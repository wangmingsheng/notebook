var MemberData = require('../data/Member');

module.exports = React.createClass({
    rowSelectedEvent: function(id) {
        this.state.select[id] = !this.state.select[id];
        this.setState({select: this.state.select});
    },
    updateSource: function(data) {
        this.setState({source: data});
    },
    updateSearch: function(value) {
        this.setState({search: value});
    },
    getSelectedData: function() {
        var result = {};
        for(var i in this.state.source) {
            if(this.state.select[i]) result[i] = this.state.source[i];
        }
        return result;
    },
    getInitialState: function() {
        return {select: this.props.selectData || {}, source: MemberData.source || [] , search: ''}
    },
    render: function() {
        var liValue = [];
        var source = this.state.source;
        for(var key in source) {
            var className = '';
            if(this.state.select[key]) className = 'check';
            if(this.state.search.length > 0 && source[key].display_name_pinyin.toLowerCase().indexOf(this.state.search.toLowerCase()) == -1) continue;
            liValue.push(<li className={className} key={key} onClick={this.rowSelectedEvent.bind(this,key)}>
                    <div className="avatar"><img src={source[key].avatar} alt=""/></div>
                    <div className="member_name"><span>{source[key].display_name}</span></div>
                </li>);
        }
        return <ul className="team_member_list">
            {liValue}
        </ul>
    }
});
