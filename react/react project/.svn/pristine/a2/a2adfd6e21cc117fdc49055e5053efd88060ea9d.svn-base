var TaskHandle = require('../../handle/teamwork/Task');
var MemberData = require('../../data/Member');

module.exports = React.createClass({
    componentDidMount: function() {
        TaskHandle.getTaskComments(this.props.topicId, function(result) {
            if(result.code == 200) {
                this.setState({source: result.data || []});
                return true;
            }
        }.bind(this));
    },
    getInitialState: function() {
        return {source: [] };
    },
    render: function() {
        return <div className="chat">
            <ul>
                {
                    this.state.source.map(function(item, index) {
                        var data = MemberData.source[item.creator];
                        return <li key={index}>
                            <i className="avatar"><img src={data.avatar} /></i>
                            <div className="content">
                                <div className="owner_info">
                                    <span>{data.display_name}</span>
                                    <label>{Utils.formatDate(item.create_time, 'YYYY年MM月DD日')}</label>
                                    <label>{Utils.formatDate(item.create_time, 'hh:mm')}</label>
                                </div>
                                <p>{item.body.content}</p>
                            </div>
                        </li>
                    })
                }

                <li>
                    <i className="avatar"><img src="../../../assets/images/member1.png" /></i>
                    <div className="content">
                        <div className="owner_info">
                            <span>Sunny</span>
                            <label>2016年9月18日</label>
                            <label>18:30</label>
                        </div>
                        <div className="voice">
                            <div className="tag" style={{width: 40 + "%"}}>
                                <div className="arrow">
                                    <em></em>
                                    <span></span>
                                </div>
                                <i>&gt;&gt;</i>
                                <span className="duration">15</span>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <i className="avatar"><img src="../../../assets/images/member1.png" /></i>
                    <div className="content first_login others">
                        <div className="owner_info">
                            <span>Andy</span>
                            <label>18:30</label>
                        </div>
                        <strong>欢迎您使用Facework</strong>
                        <div className="voice">
                            <div className="tag" style={{width: 20 + "%"}}>
                                <div className="arrow">
                                    <em></em>
                                    <span></span>
                                </div>
                                <i>&gt;&gt;</i>
                                <span className="duration">15</span>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <i className="avatar"><img src="../../../assets/images/member2.png" /></i>
                    <div className="content">
                        <div className="owner_info">
                            <span>Sunny</span>
                            <label>2016年9月18日</label>
                            <label>18:30</label>
                        </div>
                        <p>Welcome to the community documentation wiki for</p>
                    </div>
                </li>
            </ul>
        </div>
    }
});
