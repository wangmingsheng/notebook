module.exports = {
	setUrl: function(href) {
		if (href.replace(location.origin, '') != location.href.replace(location.origin, '')) {
			Interface.webPushInfo(location.pathname + location.search + location.hash);
			history.pushState(null, null, href);
			return true;
		}
		return false;
	},
	validateMember: function(item) {
		if (!item || item.is_deleted == 1 || item.enabled != 1 || item.status != 1) return false;
		return true;
	},
	screenState: function(state) {
		Config.locked = state;
	},
	formatDate: function(datetime, format) {
		if (!format) format = 'YYYY-MM-DD HH:mm';
		if (typeof(datetime) == 'string') {
			datetime = datetime.replace(/\-/g, '/');
			datetime = new Date(datetime);
		} else if (typeof(datetime) == 'number') {
			datetime = new Date(datetime * 1000);
		} else if (!(datetime instanceof Date)) {
			datetime = new Date();
		}

		var week = ['日', '一', '二', '三', '四', '五', '六'];
		return format.replace(/YYYY|YY|MM|DD|HH|hh|mm|SS|ss|week/g, function(key) {
			switch (key) {
				case 'YYYY': return datetime.getFullYear();
				case 'YY': return (datetime.getFullYear() + '').slice(2);
				case 'MM': return datetime.getMonth() + 1 < 10 ? '0' + (datetime.getMonth() + 1) : datetime.getMonth() + 1;
				case 'DD': return datetime.getDate() < 10 ? '0' + datetime.getDate() : datetime.getDate();
				case 'HH':
				case 'hh': return datetime.getHours() < 10 ? '0' + datetime.getHours() : datetime.getHours();
				case 'mm': return datetime.getMinutes() < 10 ? '0' + datetime.getMinutes() : datetime.getMinutes();
				case 'SS':
				case 'ss': return datetime.getSeconds() < 10 ? '0' + datetime.getSeconds() : datetime.getSeconds();
				case 'week': return week[datetime.getDay()];
			}
		});
	},
	filterHHmm00: function(timeStr) {
		switch(timeStr) {
			case '00:00':
				return '';
		}
		return timeStr;
	}
};