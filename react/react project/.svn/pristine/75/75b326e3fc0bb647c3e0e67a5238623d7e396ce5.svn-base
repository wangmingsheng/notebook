var MemberData = require('../data/Member');

module.exports = React.createClass({
    componentWillReceiveProps: function(nProps) {
        if(this.isMounted) this.setState({data: nProps.data})
    },
    shouldComponentUpdate: function(nProps, nState) {
        return this.state != nState;
    },
    transformToArr: function(haXiObj) {
        var result = [];
        for(var i in haXiObj) {
            if(haXiObj[i]) result.push(MemberData.source[i]);
        }
        return result;
    },
    getInitialState: function() {
        return {data: this.props.data || {}}
    },
    render: function() {
        var data = this.transformToArr(this.state.data);
        var size = 35 * (parseInt($('html').css('font-size')) / 20);
        return (
            <ul className="across_member_list" style={{width: data.length * size + 'px'}}>
                {
                    data.map(function(item, index) {
                        return <li key={index}><img src={item.avatar} alt="element"/></li>
                    })
                }
            </ul>
        );
    }
});
